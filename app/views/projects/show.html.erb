<head>
  <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Item');
        data.addColumn('number', 'Value');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
</head>
<body>
  <%= render :partial => 'shared/logoutheader' %>
  <section class="project-show group">
    <%= render :partial => 'shared/sidebar', locals: {projects: @projects} %>
    <form action="<%= edit_user_project_url(@project) %>" method="get" style="float:right">
      <button type="submit" class="edit-project-button">Edit Project</button></form>
    <article class="project-content group">
      <div class="project-metrics">
        <span class="project-name"><%= @project.name %></span><br>
        <% if @metrics %>
          <ul>
            <% @metrics.each do |metric| %>
              <li><%= metric.display_name %> <%= metric.value.round(1) %></li>
            <% end %>
          </ul>
        <% end %>
      </div>
      <% if @assumptions %>
      <div class="show-assumptions">
        <ul>Assumptions<br>
          <% @assumptions.each do |assume| %>
            <% if assume.assumption_type == "growth" %>
              <li> <%= assume.value*100 %>% <%= assume.time_unit %>/<%= assume.time_unit %>
                <%= assume.name %> growth</li>
            <% else %>
            <li>
              <% if assume.value > 1.001 %>
                $<%= assume.value %>mm in <%= assume.name %> per
                <%= assume.time %>
              <% else %>
                <%= assume.value*100 %>% in <%= assume.name %> per
                <%= assume.time %>
              <% end %></li>
            <% end %>
          <% end %>
        </ul>
      </div>
      <% end %>
      <div id="chart_div"></div>
      <div class="financials">
        <ul>
          <li>Company Financials</li>
          <li><%= link_to "Income Statement", user_company_income_statement_url %></li>
          <li><%= link_to "Balance Sheet", user_company_balance_sheet_url %></li>
          <li><%= link_to "Cash Flow Statement", user_company_cash_flow_url %></li>
        </ul>
      </div>
      <br><span id="user-email"><%= @user.email %></span>
    </article>
  </section>
</body>